{"version":3,"sources":["canvas/ExtendedCanvas.js","canvas/ScreenView.js","colors.js","canvas/CoordinatePlane.js","TopBar.js","App.js","index.js"],"names":["ExtendedCanvas","draw","init","zoom","canvasRef","useRef","useState","window","innerWidth","setWidth","innerHeight","setHeight","firstUpdate","setFirstUpdate","updateWidthAndHeight","callZoom","event","deltaY","preventDefault","useEffect","canvas","current","context","getContext","width","height","style","left","top","position","addEventListener","passive","removeEventListener","ScreenView","props","canvasDrag","addDataPoint","rest","delta","lastMousePositionX","lastMousePositionY","isMouseDown","setMouseDown","hasDragged","setHasDragged","setLastMousePositionX","setLastMousePositionY","id","className","onTouchStart","touch","touches","clientX","clientY","onTouchEnd","onTouchMove","differenceX","differenceY","onMouseMove","nativeEvent","offsetX","offsetY","onMouseDown","onMouseUp","ref","COLORS","white","gray","grayDark","black","blackDark","yellow","yellowDark","orange","orangeDark","turquoise","turquoiseDark","blue","purple","maxScale","minScale","functionColor","functions","a","P","map","x","y","calculateBestPolynomial","Infinity","Math","pow","exp","useNonLinearRegression","sin","log","CoordinatePlane","ctx","undefined","scale","drawEveryNthLine","xOrigin","yOrigin","renderingFunctionObjects","initCanvas","componentDidUpdate","prevProps","prevState","clearBoardFlag","findingBestLine","GetBestFuncs","points","stopFunctionFind","planeToScreenSpace","xPDifference","yPDifference","screenToPlaneSpace","normalizedX","normalizedY","zoomMultiplyCounter","mouseX","mouseY","change","console","mouseBefore","mouseBeforeScreen","drawFunction","funcObject","color","lineWidth","strokeStyle","beginPath","smallestSample","biggestSample","startScreenPos","max","endScreenPos","min","interval","xP","yP","lineTo","stroke","drawFunctionFormula","xPos","yPos","fillStyle","font","fillText","fillRect","fill","drawBG","lineSpace","startDraw","i","moveTo","drawScaleLines","length","drawAxis","arc","PI","drawPoints","spaceBetweenLines","screenSide","firstDrawX","floor","firstDrawY","firstDrawPixel","RoundingFactor","pos","num","round","drawScaleText","error","this","Component","Array","functionApproximates","functionApproximateIndex","params","leastSquaresMultiplier","func","total","getLeastSquares","sort","b","functionsToShow","push","GetStringFormula","tenthPower","RoundCorrectDecimals","number","Number","EPSILON","str","nextParamIndex","slice","abs","coefficentAmount","matrixA","zeros","matrixB","matAValues","j","value","index","matrix","newValue","matrixAT","M","ii","dim","e","I","C","matrix_invert","_data","multiply","funcIndex","iteration","initialValues","fun","Parm0","Opt","maxIter","step","p","si","display","objFun","yp","yi","reduce","cloneVector","V","v","P0","P1","n","funParm","nonLinearRegression","TopBar","addPoint","btnStyle","backgroundColor","borderColor","yFieldValue","setYFieldValue","xFieldValue","setXFieldValue","xInvalid","setXInvalid","yInvalid","setYInvalid","addPointEvent","invalid","changeFocusingField","key","toLowerCase","includes","form","target","indexOf","elements","focus","Navbar","background","expand","sticky","Col","Brand","Button","onClick","clear","disabled","findingDone","startFunctionFind","Form","Row","Control","isInvalid","size","type","placeholder","onInput","replace","onKeyDown","App","setPoints","setClearBoardFlag","setFindingBestLine","setFindingDone","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ceb89506.chunk.js","sourcesContent":["import { useRef, useEffect, useState } from 'react'\r\n\r\nconst ExtendedCanvas = (draw, init, zoom) => {\r\n  \r\n  const canvasRef = useRef(null)\r\n  const [width, setWidth] = useState(window.innerWidth);\r\n  const [height, setHeight] = useState(window.innerHeight);\r\n  const [firstUpdate, setFirstUpdate] = useState(true);\r\n  \r\n  const updateWidthAndHeight = () => {\r\n    setWidth(window.innerWidth);\r\n    setHeight(window.innerHeight);\r\n  };\r\n\r\n  const callZoom = (event) => {\r\n    zoom(event.deltaY);\r\n    event.preventDefault();\r\n  }\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current\r\n    const context = canvas.getContext('2d')\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n    canvas.style.left = \"0px\";\r\n    canvas.style.top = \"0px\";\r\n    canvas.style.position = \"absolute\";\r\n    if (firstUpdate) {\r\n      setFirstUpdate(false);\r\n      init(context);\r\n    }\r\n    draw(context);\r\n\r\n    window.addEventListener(\"resize\", updateWidthAndHeight);\r\n    window.addEventListener(\"wheel\", callZoom, { passive: false });\r\n    return () => {window.removeEventListener(\"resize\", updateWidthAndHeight);\r\n                  window.removeEventListener(\"wheel\", callZoom, { passive: false });}\r\n  })\r\n  \r\n  return canvasRef;\r\n}\r\n\r\nexport default ExtendedCanvas;","import React, { useState } from 'react';\r\nimport ExtendedCanvas from './ExtendedCanvas.js'\r\n\r\nconst ScreenView = props => { \r\n    const callZoom = (delta) => {\r\n        zoom(delta, lastMousePositionX, lastMousePositionY);\r\n    }\r\n\r\n    const { init, draw, zoom, canvasDrag, addDataPoint, ...rest } = props;\r\n    const canvasRef = ExtendedCanvas(draw, init, callZoom);\r\n    \r\n    const [isMouseDown, setMouseDown] = useState(false);\r\n    const [hasDragged, setHasDragged] = useState(false);\r\n    const [lastMousePositionX, setLastMousePositionX] = useState(0);\r\n    const [lastMousePositionY, setLastMousePositionY] = useState(0);\r\n    \r\n    const mouseDown = ({nativeEvent}) => {\r\n        setMouseDown(true);\r\n        setHasDragged(false);\r\n        const {offsetX, offsetY} = nativeEvent;\r\n        setLastMousePositionX(offsetX);\r\n        setLastMousePositionY(offsetY);\r\n    }\r\n    const mouseMove = ({nativeEvent}) => {\r\n        const {offsetX, offsetY} = nativeEvent;\r\n        setLastMousePositionX(offsetX);\r\n        setLastMousePositionY(offsetY);\r\n        \r\n        if (isMouseDown) {\r\n            setHasDragged(true);\r\n            let differenceX = lastMousePositionX - offsetX;\r\n            let differenceY = lastMousePositionY - offsetY;\r\n            canvasDrag(differenceX, differenceY);\r\n        }\r\n    }\r\n    const mouseUp = ({nativeEvent}) => {\r\n        setMouseDown(false);\r\n        if (!hasDragged) {\r\n            // It's a click. Add a point\r\n            const {offsetX, offsetY} = nativeEvent;\r\n            addDataPoint(offsetX, offsetY);\r\n        }\r\n    }\r\n\r\n    const touchDown = (event) => {\r\n        setMouseDown(true);\r\n        setHasDragged(false);\r\n        let touch = event.touches[0];\r\n        setLastMousePositionX(touch.clientX);\r\n        setLastMousePositionY(touch.clientY);\r\n    }\r\n    const touchMove = (event) => {\r\n        setHasDragged(true);\r\n        let touch = event.touches[0];\r\n        let differenceX = lastMousePositionX - touch.clientX;\r\n        let differenceY = lastMousePositionY - touch.clientY;\r\n        setLastMousePositionX(touch.clientX);\r\n        setLastMousePositionY(touch.clientY);\r\n        canvasDrag(differenceX, differenceY);\r\n    }\r\n    const touchUp = (event) => {\r\n        setMouseDown(false);\r\n        if (!hasDragged) {\r\n            // It's a click. Add a point\r\n            addDataPoint(lastMousePositionX, lastMousePositionY);\r\n        }\r\n    }\r\n    \r\n    /* \r\n    window.addEventListener('wheel', (event) => {\r\n        zoom(event.deltaY);\r\n        event.preventDefault();\r\n    }, { passive: false });\r\n    */\r\n\r\n    return (\r\n        <canvas id=\"canvas\" className=\"canvas\" onTouchStart={touchDown} onTouchEnd={touchUp} onTouchMove={touchMove}\r\n        onMouseMove={mouseMove} onMouseDown={mouseDown} onMouseUp={mouseUp} ref={canvasRef} {...rest}/>\r\n        /*document.getElementById(\"canvas\").addEventListener('wheel',function(event){\r\n            onScroll(event);\r\n            return false; \r\n        }, false)*/\r\n    )\r\n}\r\n  \r\nexport default ScreenView;","// Flat UI Palette v1\r\n\r\nexport const COLORS = {\r\n    white: '#ffffff',\r\n    gray: '#ecf0f1',\r\n    grayDark: '#bdc3c7',\r\n    black: '#34495e',\r\n    blackDark: '#2c3e50',\r\n    yellow: '#f1c40f',\r\n    yellowDark: '#f39c12',\r\n    orange: '#e67e22',\r\n    orangeDark: '#d35400',\r\n    turquoise: '#1abc9c',\r\n    turquoiseDark: '#16a085',\r\n    blue: '#3498db',\r\n    purple: '#9b59b6',\r\n}\r\n\r\nexport default COLORS;","import  { React, Component } from 'react'\r\nimport ScreenView from './ScreenView.js'\r\nimport COLORS from '../colors.js'\r\n\r\nimport { zeros, multiply } from \"mathjs\";\r\n\r\nconst minSpaceBetweenLines = 20;\r\nconst maxSpaceBetweenLine = 50;\r\nconst zoomSpeed = 0.003;\r\nconst startZoom = 50;\r\nconst maxScale = 1_000_000_000_000;\r\nconst minScale = 0.000_000_0015;\r\n\r\nconst pointRadius = 6;\r\nconst samplesInFunction = 200;\r\nconst functionLineWidth = 5;\r\n// From colors.js blended halfway with white\r\nconst functionColor = [\r\n    '#F8E287'/*Yellow*/, '#8DDECE'/*turquoise*/, \r\n    '#9ACCED'/*Blue*/, '#CDACDB'/*Purple*/,\r\n    '#F3BF91'/*Orange*/, '#F3A69E'/*Red*/,\r\n    '#97E6B8'/*Green*/, '#9AA4AF'/*Gray*/\r\n]\r\n\r\nconst textXOffsetFromCenter = 0;\r\nconst textYOffsetFromCenter = -5;\r\nconst linesBetweenTexts = 5;\r\n\r\nconst maxShowFuncAmount = 3;\r\nconst leastSquaresTreshold = 1;\r\nconst decimals = 5;\r\n\r\n/* \r\nf[0] = map version, f[1] = normal version, f[2] = method to find best-fit, f[3] = string formula (params with _)\r\nf[4] = least squares multiplier, f[5] = smallest sample, f[6] = biggest sample, f[7] = min amount of samples for this\r\n\r\nLeast Squares multiplier, since for example if both Order 5 polynomial \r\nand a line get the same evaluation, a line is better\r\n\r\n*/\r\nconst functions = [ \r\n    [ /* Line */\r\n        function(a, P) { return a.map(function(x) { return P[0] + x * P[1] })},\r\n        function(x, P)                            { return P[0] + x * P[1] },\r\n        function(x, y) { return calculateBestPolynomial(2, x, y) },\r\n        \"_x + _\",\r\n        1,\r\n        -Infinity,\r\n        Infinity,\r\n        2\r\n    ],\r\n    [ /* Order 2 polynomial */\r\n        function(a, P) { return a.map(function(x) { return P[0] + x * P[1] + x * x * P[2] })},\r\n        function(x, P)                            { return P[0] + x * P[1] + x * x * P[2] },\r\n        function(x, y) { return calculateBestPolynomial(3, x, y) },\r\n        \"_x² + _x + _\",\r\n        2,\r\n        -Infinity,\r\n        Infinity,\r\n        3\r\n    ],\r\n    [ /* Order 3 polynomial */\r\n        function(a, P) { return a.map(function(x) { return P[0]+x*P[1]+x*x*P[2]+Math.pow(x, 3)*P[3] })},\r\n        function(x, P)                            { return P[0]+x*P[1]+x*x*P[2]+Math.pow(x, 3)*P[3] },\r\n        function(x, y) { return calculateBestPolynomial(4, x, y) },\r\n        \"_x³ + _x² + _x + _\",\r\n        3,\r\n        -Infinity,\r\n        Infinity,\r\n        4\r\n    ],\r\n    [ /* Order 4 polynomial */\r\n        function(a, P) { return a.map(function(x) { return P[0]+x*P[1]+x*x*P[2]+Math.pow(x, 3)*P[3]+Math.pow(x, 4)*P[4] })},\r\n        function(x, P)                            { return P[0]+x*P[1]+x*x*P[2]+Math.pow(x, 3)*P[3]+Math.pow(x, 4)*P[4] },\r\n        function(x, y) { return calculateBestPolynomial(5, x, y) },\r\n        \"_x⁴ + _x³ + _x² + _x + _\",\r\n        4,\r\n        -Infinity,\r\n        Infinity,\r\n        5\r\n    ],\r\n    [ /* Order 5 polynomial */\r\n        function(a, P) { return a.map(function(x) { return P[0]+x*P[1]+x*x*P[2]+Math.pow(x, 3)*P[3]+Math.pow(x, 4)*P[4]+Math.pow(x, 5)*P[5] })},\r\n        function(x, P)                            { return P[0]+x*P[1]+x*x*P[2]+Math.pow(x, 3)*P[3]+Math.pow(x, 4)*P[4]+Math.pow(x, 5)*P[5] },\r\n        function(x, y) { return calculateBestPolynomial(6, x, y) },\r\n        \"_x⁵ + _x⁴ + _x³ + _x² + _x + _\",\r\n        5,\r\n        -Infinity,\r\n        Infinity,\r\n        6\r\n    ],\r\n    [ /* Natural Exponent */\r\n        function(a, P) { return a.map(function(x) { return P[0] * Math.exp(P[1] * x) + P[2] })},\r\n        function(x, P)                            { return P[0] * Math.exp(P[1] * x) + P[2] },\r\n        function(x, y) { return useNonLinearRegression(5, 5000, x, y) },\r\n        \"_e^_ + _\",\r\n        1,\r\n        -Infinity,\r\n        Infinity,\r\n        1\r\n    ],\r\n    [ /* Sin */\r\n        function(a, P) { return a.map(function(x) { return P[0] * Math.sin(P[1] * x + P[2]) + P[3] })},\r\n        function(x, P)                            { return P[0] * Math.sin(P[1] * x + P[2]) + P[3] },\r\n        function(x, y) { return  useNonLinearRegression(6, 5000, x, y) },\r\n        \"_ * sin(_x + _) + _\",\r\n        3,\r\n        -Infinity,\r\n        Infinity,\r\n        4\r\n    ],\r\n    [ /* natural logarithmic */\r\n        function(a, P) { return a.map(function(x) { return P[0] * Math.log(P[1] * x) })},\r\n        function(x, P)                            { return P[0] * Math.log(P[1] * x) },\r\n        function(x, y) { return useNonLinearRegression(7, 5000, x, y) },\r\n        \"_ * ln(_x)\",\r\n        1,\r\n        0.000000000001,\r\n        Infinity,\r\n        1\r\n    ],\r\n];\r\n\r\nclass CoordinatePlane extends Component {\r\n    ctx = undefined;\r\n    scale = startZoom;\r\n    drawEveryNthLine = 1;\r\n    xOrigin = undefined;\r\n    yOrigin = undefined;\r\n\r\n    /* [ ... [func, i, stringFormula, error], [func, i, stringFormula, error] ... ] */\r\n    renderingFunctionObjects = [];\r\n\r\n    initCanvas = (ctx) => {\r\n        this.ctx = ctx;\r\n        this.xOrigin = ctx.canvas.width / 2;\r\n        this.yOrigin = ctx.canvas.height / 2;\r\n    }\r\n\r\n    canvasDrag = (differenceX, differenceY) => {\r\n        this.xOrigin -= differenceX;\r\n        this.yOrigin -= differenceY;\r\n    }\r\n\r\n    componentDidUpdate = (prevProps, prevState) => {\r\n        // Clear update incoming\r\n        if (this.props.clearBoardFlag !== prevProps.clearBoardFlag) {\r\n            this.renderingFunctionObjects = []\r\n        }\r\n\r\n        // Start finding best line\r\n        if (this.props.findingBestLine === true && prevProps.findingBestLine === false) {\r\n            this.renderingFunctionObjects = []\r\n            this.renderingFunctionObjects = GetBestFuncs(this.props.points);\r\n            this.props.stopFunctionFind();\r\n        }\r\n    }\r\n\r\n    planeToScreenSpace = (x, y) => {\r\n        // Multiply by the scale to get the pixel difference from the middle\r\n\t\tlet xPDifference = x * this.scale;\r\n\t\tlet yPDifference = y * -this.scale; // Use minus because the y axis is flipped in pixels\r\n\r\n\t\t// Add it to the pixel center coors to get the coords\r\n\t\tlet xP = this.xOrigin + xPDifference;\r\n\t\tlet yP = this.yOrigin + yPDifference; \r\n\r\n\t\treturn [xP, yP];\r\n    }\r\n    screenToPlaneSpace = (x, y) => {\r\n        // Set the planes 0 0 point to pixel 0 0.\r\n        let normalizedX = x - this.xOrigin;\r\n        let normalizedY = y - this.yOrigin;\r\n        // Divide by the scale to get the coordinates\r\n        let xScr = normalizedX / this.scale;\r\n        let yScr = normalizedY / -this.scale; // Use minus because the y axis is flipped in pixels\r\n        return [xScr, yScr];\r\n    }\r\n\r\n    // Zoom works like this: if the first non-zero number is a two, multiply by 5/2, else 2\r\n    zoomMultiplyCounter = 2;\r\n    zoom = (delta, mouseX, mouseY) => {\r\n        const change = delta * this.scale * zoomSpeed;\r\n        if ((this.scale > maxScale && change < 0) || (this.scale < minScale && change > 0)) {\r\n            console.log(\"Returning cause scale is\", this.scale, \"and delta is\", change);\r\n            return;\r\n        }\r\n\r\n        let mouseBefore = this.screenToPlaneSpace(mouseX, mouseY);\r\n        this.scale -= change;\r\n        let mouseBeforeScreen = this.planeToScreenSpace(mouseBefore[0], mouseBefore[1]);\r\n\r\n        this.xOrigin -= mouseBeforeScreen[0] - mouseX;\r\n        this.yOrigin -= mouseBeforeScreen[1] - mouseY;\r\n\r\n        // Scale text\r\n        if (this.drawEveryNthLine * this.scale < minSpaceBetweenLines) {\r\n            this.zoomMultiplyCounter--;\r\n            if (this.zoomMultiplyCounter < 0) {\r\n                this.zoomMultiplyCounter += 3;\r\n                this.drawEveryNthLine *= 5/2;\r\n            }\r\n            else this.drawEveryNthLine *= 2;\r\n        }\r\n        else if (this.drawEveryNthLine * this.scale > maxSpaceBetweenLine) {\r\n            this.zoomMultiplyCounter++;\r\n            if (this.zoomMultiplyCounter > 2) {\r\n                this.zoomMultiplyCounter -= 3;\r\n                this.drawEveryNthLine /= 5/2;\r\n            }\r\n            else this.drawEveryNthLine /= 2;\r\n        }\r\n\r\n        this.draw();\r\n    }\r\n\r\n    draw = () => {\r\n        let drawBG = (ctx) => {\r\n            ctx.fillStyle = COLORS.white;\r\n            ctx.beginPath();\r\n            ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n            ctx.fill();\r\n        }\r\n        let drawScaleLines = (ctx) => {\r\n            ctx.lineWidth = 2;\r\n            ctx.beginPath();\r\n            ctx.strokeStyle = COLORS.gray;\r\n            let lineSpace = this.scale * this.drawEveryNthLine;\r\n            let startDraw = this.xOrigin % lineSpace;// Get the remainder to know where to start drawing the lines\r\n\r\n            for (let i = startDraw; i < ctx.canvas.width; i += lineSpace) {\r\n                ctx.moveTo(i, 0);\r\n                ctx.lineTo(i, ctx.canvas.height);\r\n            }\r\n            startDraw = this.yOrigin % lineSpace;\r\n            for (let i = startDraw; i < ctx.canvas.height; i += lineSpace) {\r\n                ctx.moveTo(0, i);\r\n                ctx.lineTo(ctx.canvas.width, i);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n        let drawAxis = (ctx) => {\r\n            ctx.lineWidth = 2;\r\n            ctx.beginPath();\r\n            ctx.strokeStyle = COLORS.black;\r\n            ctx.moveTo(0, this.yOrigin);\r\n            ctx.lineTo(ctx.canvas.width, this.yOrigin);\r\n            ctx.moveTo(this.xOrigin, 0);\r\n            ctx.lineTo(this.xOrigin, ctx.canvas.height);\r\n            ctx.stroke();\r\n        }\r\n        let drawPoints = (ctx) => {\r\n            ctx.beginPath();\r\n            ctx.fillStyle = COLORS.blue;\r\n            for (let i = 0; i < this.props.points.length; i++) {\r\n                const [x, y] = this.planeToScreenSpace(this.props.points[i][0], this.props.points[i][1]);\r\n                ctx.moveTo(x, y);\r\n                ctx.arc(x, y, pointRadius, 0, 2*Math.PI);\r\n            }\r\n            ctx.fill();\r\n        }\r\n        let drawScaleText = (ctx) => {\r\n            let spaceBetweenLines = linesBetweenTexts * this.drawEveryNthLine;\r\n\r\n            let screenSide = this.screenToPlaneSpace(0, 0);\r\n\r\n            let firstDrawX = Math.floor(screenSide[0] / spaceBetweenLines) * spaceBetweenLines;\r\n            let firstDrawY = Math.floor(screenSide[1] / spaceBetweenLines) * spaceBetweenLines;\r\n            let firstDrawPixel = this.planeToScreenSpace(firstDrawX, firstDrawY);\r\n\r\n            ctx.font = \"20px Arial\";\r\n\t\t\tctx.fillStyle = COLORS.blackDark;\r\n\r\n            const RoundingFactor = 1_000_000_000_00;\r\n\r\n            let i = 0;\r\n            let pos = firstDrawPixel[0] + textXOffsetFromCenter;\r\n            while (pos < ctx.canvas.width) {\r\n                let num = Math.round((firstDrawX + i * spaceBetweenLines) * RoundingFactor) / RoundingFactor;\r\n                if (num !== 0)\r\n                    ctx.fillText(num, pos, textYOffsetFromCenter + this.yOrigin);\r\n                i++;\r\n                pos += this.scale * spaceBetweenLines;\r\n            }\r\n            i = 0;\r\n            pos = firstDrawPixel[1] + textYOffsetFromCenter;\r\n            while (pos < ctx.canvas.height) {\r\n                let num = Math.round((firstDrawY + i * spaceBetweenLines) *  RoundingFactor) / RoundingFactor;\r\n                if (num !== 0)\r\n                    ctx.fillText(num, textXOffsetFromCenter + this.xOrigin, pos);\r\n                i--;\r\n                pos += this.scale * spaceBetweenLines;\r\n            }\r\n\r\n            // Points (1, 0) and (0, 1)\r\n            /*\r\n            let point1_1 = this.screenToPlaneSpace(this.xOrigin + this.scale * this.drawEveryNthLine, this.yOrigin - this.scale * this.drawEveryNthLine);\r\n            ctx.fillText(point1_1[0].toString(), this.xOrigin + this.scale * this.drawEveryNthLine + textXOffsetFromCenter, this.yOrigin + textYOffsetFromCenter);\r\n            ctx.fillText(point1_1[1].toString(), this.xOrigin + textXOffsetFromCenter, this.yOrigin - this.scale* this.drawEveryNthLine + textYOffsetFromCenter);\r\n            //*/\r\n        }\r\n        let drawFunction = (ctx, funcObject, color) => {\r\n            ctx.lineWidth = functionLineWidth;\r\n            ctx.strokeStyle = color;\r\n            ctx.beginPath();\r\n\r\n            let smallestSample = functions[funcObject[1]][5];\r\n            let biggestSample = functions[funcObject[1]][6];\r\n\r\n            let startScreenPos = smallestSample === undefined ? 0 : Math.max(this.planeToScreenSpace(smallestSample, 0)[0], 0);\r\n            let endScreenPos = biggestSample === undefined ? ctx.canvas.width : Math.min(this.planeToScreenSpace(biggestSample, 0)[0], ctx.canvas.width);\r\n            let interval = (endScreenPos-startScreenPos) / samplesInFunction;\r\n\r\n\t\t    for (let xP = startScreenPos; xP < endScreenPos; xP += interval) {\r\n\t\t\t    let x = this.screenToPlaneSpace(xP, 0)[0];\r\n\t\t\t    let yP = this.planeToScreenSpace(0, funcObject[0](x))[1];\r\n\t\t\t\r\n\t\t\t    ctx.lineTo(xP, Math.max(0, Math.min(yP, ctx.canvas.height)));\r\n\t\t    }\r\n\t\t    ctx.stroke();\r\n        }\r\n        let drawFunctionFormula = (ctx, funcObject, color, xPos, yPos) => {\r\n\r\n            // Draw error\r\n            ctx.fillStyle = functionColor[7];/*Gray*/\r\n            ctx.font = \"15px Arial\";\r\n            ctx.fillText(\"Error \" + funcObject[3], xPos, yPos+15);\r\n\r\n            // Draw formula\r\n            ctx.font = \"25px Arial\";\r\n            ctx.fillStyle = functionColor[7];/*Gray*/\r\n            ctx.fillText(funcObject[2], xPos+1, yPos+1); // Backdrop\r\n\t\t\tctx.fillStyle = color;\r\n            ctx.fillText(funcObject[2], xPos, yPos);\r\n\r\n        }\r\n\r\n\r\n        let ctx = this.ctx;\r\n        if (ctx === undefined) {\r\n            console.error(\"Canvas context was undefined!\");\r\n            return;\r\n        }\r\n        ctx.lineWidth = 1;\r\n        \r\n        drawBG(ctx);\r\n        drawScaleLines(ctx);\r\n        for (let i = 0; i < this.renderingFunctionObjects.length; i++)\r\n            drawFunction(ctx, this.renderingFunctionObjects[i], functionColor[i]);\r\n        drawAxis(ctx);\r\n        drawPoints(ctx);\r\n        drawScaleText(ctx);\r\n        for (let i = 0; i < this.renderingFunctionObjects.length; i++)\r\n            drawFunctionFormula(ctx, this.renderingFunctionObjects[i], functionColor[i], 30, window.innerHeight - 50*i - 30);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ScreenView\r\n                init={this.initCanvas}\r\n                draw={this.draw}\r\n                zoom={this.zoom}\r\n                addDataPoint={() => {}}\r\n                canvasDrag={this.canvasDrag}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nfunction GetBestFuncs(points) {\r\n    let x = Array(points.length);\r\n    let y = Array(points.length);\r\n    for (let i = 0; i < points.length; i++) {\r\n        x[i] = points[i][0];\r\n        y[i] = points[i][1];\r\n    }\r\n\r\n    /* [ ... [func, i, leastSquares, params] ... ] */\r\n    let functionApproximates = [];\r\n    let functionApproximateIndex = 0;\r\n\r\n    for (let i = 0; i < functions.length; i++) {\r\n        if (points.length < functions[i][7])\r\n            continue;\r\n\r\n        let params = functions[i][2](x, y);\r\n        \r\n        const leastSquaresMultiplier = functions[i][4];\r\n        functionApproximates[functionApproximateIndex] = [\r\n            function(x) { return functions[i][1](x, params); }, \r\n            i, \r\n            -1,/*Placeholder*/\r\n            params\r\n        ];\r\n        functionApproximates[functionApproximateIndex][2] = \r\n            leastSquaresMultiplier * getLeastSquares(functionApproximates[functionApproximateIndex][0], x, y);\r\n\r\n        functionApproximateIndex++\r\n    }\r\n\r\n    functionApproximates.sort(function(a, b) { return (a[2] < b[2] ? -1 : 1); })\r\n\r\n    /* [ ... [func, i, stringFormula, error], [func, i, stringFormula, error] ... ] */\r\n    let functionsToShow = [];\r\n\r\n    for (let i = 0; i < maxShowFuncAmount; i++) {\r\n        if (i !== 0 && functionApproximates[i][2] > leastSquaresTreshold)\r\n            break;\r\n\r\n        functionsToShow.push([\r\n            functionApproximates[i][0], \r\n            functionApproximates[i][1], \r\n            GetStringFormula(functionApproximates[i][1], functionApproximates[i][3]),\r\n            functionApproximates[i][2]\r\n        ]);\r\n    }\r\n\r\n    return functionsToShow;\r\n}\r\n\r\nfunction GetStringFormula(i, params) {\r\n    const tenthPower = Math.pow(10, decimals);\r\n    let RoundCorrectDecimals = (number) => { return Math.round((number + Number.EPSILON) * tenthPower) / tenthPower; }\r\n\r\n    let str = functions[i][3]\r\n    \r\n    let nextParamIndex = 0;\r\n\r\n    for (let i = 0; i < str.length; i++) {\r\n        if (str[i] !== '_') \r\n            continue;\r\n        \r\n        if (params[nextParamIndex] < 0) {\r\n            // if there is a + before, switch it to -\r\n            if (i - 2 > 0 && str[i - 2] == '+') {\r\n                str = str.slice(0, i-2) + '-' + str.slice(i-1);\r\n                str = str.slice(0, i) + RoundCorrectDecimals(Math.abs(params[nextParamIndex])) + str.slice(i+1);\r\n            }\r\n            else if (i - 1 > 0 && str[i - 1] == '+') {\r\n                str[i - 1] = '-';\r\n                str = str.slice(0, i) + RoundCorrectDecimals(Math.abs(params[nextParamIndex])) + str.slice(i+1);\r\n            }\r\n            else {\r\n                str = str.slice(0, i) + RoundCorrectDecimals(params[nextParamIndex]) + str.slice(i+1);;\r\n            }\r\n        }\r\n        else {\r\n            str = str.slice(0, i) + RoundCorrectDecimals(params[nextParamIndex]) + str.slice(i+1);\r\n        }\r\n        nextParamIndex++;\r\n    }\r\n\r\n    return str;\r\n}\r\n\r\nfunction calculateBestPolynomial(coefficentAmount, x, y) {\r\n    let matrix_invert = (M) => {\r\n\t\tif(M.length !== M[0].length){return;}\r\n\t\t\r\n\t\tvar i=0, ii=0, j=0, dim=M.length, e=0, t=0;\r\n\t\tvar I = [], C = [];\r\n\t\tfor(i=0; i<dim; i+=1){\r\n\t\t\tI[I.length]=[];\r\n\t\t\tC[C.length]=[];\r\n\t\t\tfor(j=0; j<dim; j+=1){\r\n\t\t\t\tif(i===j){ I[i][j] = 1; }\r\n\t\t\t\telse{ I[i][j] = 0; }\r\n\t\t\t\t\r\n\t\t\t\tC[i][j] = M[i][j];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfor(i=0; i<dim; i+=1){\r\n\t\t\te = C[i][i];\r\n\t\t\t\r\n\t\t\tif(e===0){\r\n\t\t\t\tfor(ii=i+1; ii<dim; ii+=1){\r\n\t\t\t\t\tif(C[ii][i] !== 0){\r\n\t\t\t\t\t\tfor(j=0; j<dim; j++){\r\n\t\t\t\t\t\t\te = C[i][j];       //temp store i'th row\r\n\t\t\t\t\t\t\tC[i][j] = C[ii][j];//replace i'th row by ii'th\r\n\t\t\t\t\t\t\tC[ii][j] = e;      //repace ii'th by temp\r\n\t\t\t\t\t\t\te = I[i][j];       //temp store i'th row\r\n\t\t\t\t\t\t\tI[i][j] = I[ii][j];//replace i'th row by ii'th\r\n\t\t\t\t\t\t\tI[ii][j] = e;      //repace ii'th by temp\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\te = C[i][i];\r\n\t\t\t\tif(e===0){return}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor(j=0; j<dim; j++){\r\n\t\t\t\tC[i][j] = C[i][j]/e; //apply to original matrix\r\n\t\t\t\tI[i][j] = I[i][j]/e; //apply to identity\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor(ii=0; ii<dim; ii++){\r\n\t\t\t\tif(ii===i){continue;}\r\n\t\t\t\t\r\n\t\t\t\te = C[ii][i];\r\n\t\t\t\t\r\n\t\t\t\tfor(j=0; j<dim; j++){\r\n\t\t\t\t\tC[ii][j] -= e*C[i][j]; //apply to original matrix\r\n\t\t\t\t\tI[ii][j] -= e*I[i][j]; //apply to identity\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn I;\r\n\t}\r\n\r\n\tlet matrixA = zeros(coefficentAmount, coefficentAmount)\r\n\tlet matrixB = zeros(1, coefficentAmount);\r\n\tlet matAValues = [];//Array(2*coefficentAmount-1);\r\n\tfor (let i = 0; i < 2*coefficentAmount-1; i++) {\r\n\t\tmatAValues[i] = 0;\r\n\t\tfor (let j = 0; j < x.length; j++)\r\n\t\t\tmatAValues[i] += Math.pow(x[j], i);\r\n\t}\r\n\t// Set the values to the matrix\r\n\tmatrixA = matrixA.map(function(value, index) {\r\n\t\treturn matAValues[index[0]+index[1]];\r\n\t});\r\n\tmatrixB = matrixB.map(function(value, index, matrix){\r\n\t\tlet newValue = 0;\r\n\t\tfor (let i = 0; i < x.length; i++)\r\n\t\t\tnewValue += y[i] * Math.pow(x[i], index[1]);\r\n\t\treturn newValue\r\n\t});\r\n\tlet matrixAT = matrix_invert(matrixA._data);\r\n\r\n\t// Then just the final multiply\r\n\tlet matrixC = multiply(matrixB, matrixAT);\r\n    return matrixC._data[0];\r\n}\r\n\r\nfunction useNonLinearRegression(funcIndex, iteration, x, y) {\r\n    let initialValues = Array(10/*The most amount of numbers a funtion input can have*/).fill(1);\r\n    return nonLinearRegression(functions[funcIndex][0], initialValues, x, y, {maxIter: iteration,display:false});\r\n}\r\n\r\nfunction nonLinearRegression(fun,Parm0,x,y,Opt) {\r\n\tif(!Opt){Opt={}};\r\n\tif(!Opt.maxIter){Opt.maxIter=1000};\r\n\tif(!Opt.step){// initial step is 1/100 of initial value (remember not to use zero in Parm0)\r\n\t\tOpt.step=Parm0.map(function(p){return p/100});\r\n\t\tOpt.step=Opt.step.map(function(si){if(si==0){return 1}else{ return si}}); // convert null steps into 1's\r\n\t};\r\n\tif(typeof(Opt.display)=='undefined'){Opt.display=true};\r\n\tif(!Opt.objFun){Opt.objFun=function(y,yp){return y.map(function(yi,i){return Math.pow((yi-yp[i]),2)}).reduce(function(a,b){return a+b})}} //SSD\r\n\t\r\n\tvar cloneVector=function(V){return V.map(function(v){return v})};\r\n\tvar P0=cloneVector(Parm0),P1=cloneVector(Parm0);\r\n\tvar n = P0.length;\r\n\tvar step=Opt.step;\r\n\tvar funParm=function(P){return Opt.objFun(y,fun(x,P))}//function (of Parameters) to minimize\r\n\t// silly multi-univariate screening\r\n\tfor(var i=0;i<Opt.maxIter;i++) {\r\n\t\tfor(var j=0;j<n;j++){ // take a step for each parameter\r\n\t\t\tP1=cloneVector(P0);\r\n\t\t\tP1[j]+=step[j];\r\n\t\t\tif(funParm(P1)<funParm(P0)) { // if parm value going in the righ direction\r\n\t\t\t\tstep[j]=1.2*step[j]; // then go a little faster\r\n\t\t\t\tP0=cloneVector(P1);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tstep[j]=-(0.5*step[j]); // otherwiese reverse and go slower\r\n\t\t\t}\t\r\n\t\t}\r\n        // display\r\n\t\t//if(Opt.display){if(i>(Opt.maxIter-10)){console.log(i+1,funParm(P0),P0)}}\r\n\t}\r\n\treturn P0;\r\n};\r\nfunction getLeastSquares(func, x, y) {\r\n    let total = 0;\r\n    for (let i = 0; i < x.length; i++)\r\n        total += Math.pow(func(x[i]) - y[i], 2);\r\n    return total / x.length;\r\n}\r\n\r\n\r\nexport default CoordinatePlane;","import {React, useState} from 'react'\r\nimport COLORS from './colors.js'\r\nimport './index.css'\r\nimport {Navbar, Button, Col, Form, Row } from 'react-bootstrap'\r\n\r\nfunction TopBar(props) {\r\n    const { addPoint } = props; \r\n    const btnStyle = { backgroundColor: COLORS.yellowDark, borderColor: COLORS.yellowDark };\r\n    const [yFieldValue, setYFieldValue] = useState(\"\");\r\n    const [xFieldValue, setXFieldValue] = useState(\"\");\r\n    const [xInvalid, setXInvalid] = useState(false);\r\n    const [yInvalid, setYInvalid] = useState(false);\r\n\r\n    function addPointEvent() {\r\n        let invalid = xFieldValue === \"\" || yFieldValue === \"\"\r\n        setXInvalid(xFieldValue === \"\");\r\n        setYInvalid(yFieldValue === \"\");\r\n        if (invalid) return;\r\n\r\n        setYFieldValue(\"\");\r\n        setXFieldValue(\"\");\r\n        addPoint(Number(xFieldValue), Number(yFieldValue));\r\n    }\r\n\r\n    const changeFocusingField = (event, delta) => {\r\n        let key = event.key.toLowerCase();\r\n        const acceptedKeys = [\"arrowright\", \"arrowleft\", \"enter\"];\r\n        if (!acceptedKeys.includes(key))\r\n            return;\r\n        \r\n        const form = event.target.form;\r\n        const index = [...form].indexOf(event.target);\r\n        form.elements[index + delta].focus();\r\n        event.preventDefault();\r\n    }\r\n\r\n    return (\r\n        <Navbar style={{background: COLORS.turquoise}} expand=\"lg\" sticky=\"top\">\r\n            <Col>\r\n                <div className=\"leftSide\">\r\n                    <Navbar.Brand className=\"ml-2\">Find a Function</Navbar.Brand>\r\n\r\n                    <Button style={btnStyle} onClick={() => props.clear()}>Clear</Button>\r\n                </div>\r\n            </Col>\r\n\r\n            <Col>\r\n                <div className=\"center\">\r\n                    <Button style={btnStyle} disabled={!props.findingDone} onClick={() => props.startFunctionFind()}>{props.findingDone ? \"Start Find\" : \"Finding...\"}</Button>\r\n                </div>\r\n            </Col>\r\n\r\n            <Col>\r\n                <div className=\"rightSide\">\r\n                    <Form>\r\n                        <Row>\r\n                            <Col style={{width: \"40%\"}}>\r\n                                <Form.Control isInvalid={xInvalid} size=\"sm\" type=\"text\" placeholder=\"X-Coord\" \r\n                                    value={xFieldValue} onInput={(event) => setXFieldValue(event.target.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1'))}\r\n                                    onKeyDown={(event) => {changeFocusingField(event, 1)}}/>\r\n                            </Col>\r\n                            <Col style={{width: \"40%\"}}>\r\n                                <Form.Control isInvalid={yInvalid} size=\"sm\" type=\"text\" placeholder=\"Y-Coord\"\r\n                                    value={yFieldValue} onInput={(event) => setYFieldValue(event.target.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1'))}\r\n                                    onKeyDown={(event) => {\r\n                                        changeFocusingField(event, -1);\r\n                                        if (event.key.toLowerCase() === \"enter\")\r\n                                            addPointEvent();\r\n                                    }}/>\r\n                            </Col>\r\n                            <Col style={{width: \"20%\"}}>\r\n                                <Button style={btnStyle} onClick={addPointEvent}>Add</Button>\r\n                            </Col>\r\n                        </Row>\r\n                    </Form>\r\n                </div>\r\n            </Col>\r\n\r\n        </Navbar>\r\n    );\r\n}\r\n\r\nexport default TopBar;","import './App.css';\nimport { React, useState } from 'react';\nimport CoordinatePlane from './canvas/CoordinatePlane';\nimport TopBar from './TopBar.js';\n\nfunction App() {\n  const [points, setPoints] = useState([]);\n  const [clearBoardFlag, setClearBoardFlag] = useState(false);\n\n  const [findingBestLine, setFindingBestLine] = useState(false);\n  const [findingDone, setFindingDone] = useState(true);\n\n  function addPoint(x, y) {\n    setPoints([...points, [x, y]]);\n  }\n  function clear() {\n    setPoints([]);\n    setClearBoardFlag(!clearBoardFlag);\n  }\n  function startFunctionFind() {\n    setFindingBestLine(true);\n    setFindingDone(false);\n  }\n  function stopFunctionFind() {\n    setFindingBestLine(false);\n    setFindingDone(true);\n  }\n\n  return (\n    <div>\n      <TopBar addPoint={addPoint} clear={clear} findingDone={findingDone} startFunctionFind={startFunctionFind}/>\n      <CoordinatePlane clearBoardFlag={clearBoardFlag} points={points} findingBestLine={findingBestLine} stopFunctionFind={stopFunctionFind}/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(<App />, document.getElementById(\"root\"));"],"sourceRoot":""}